+ поменять метод jwt encode с синхронного на асинхронный 
+ изменить метод registration (возвращать просто статус) // не требуется
+ nodemailer Auth2o (доступно только для gmail)
- закодировать пароль от email с помощью bcrypt (?)
- добавить тесты
- вывод ошибок при logout
- как происходит logout после регистрации
- проверить, что переменные user и sessions из Dao не доступны глобально

- ПРОБЛЕМА: для одного пользователя может быть одновременно выпущенно несколько токенов
  если токен будет украден, то и пользователь и злоумышленник могут будут иметь доступ к аккаунту
  это можно исправить посредством сессий,
  каждый раз при логине создается новый токен, а старый становится невалидным 
   Валидный токен храниться в sessions
   минус sessions в том, что пользователь не сможет войти в аккаунт одновременно более чем с одно устройства

status code:
500 - Internal Server Error, Внутренняя ошибка сервера 
сервер столкнулся с неожиданным условием, которое помешало ему выполнить запрос.
400 - Bad Request сервер не смог понять запрос из-за недействительного синтаксиса. 
Клиент не должен повторять этот запрос без изменений.
401 - Unauthorized клиента указывает, что запрос не был применен, 
поскольку ему не хватает действительных учетных данных для целевого ресурса.


1) пользователь отправляет запрос касаемо проектов
2) В запросе содержиться bearer token header
3) На сервере проверяется есть ли данный токен в коллекции sessions
4) Если токен есть, то проверяется его валидность (что не истек)
5) Если токен истек, то осуществляется удаление токена из
sessions token на клиент отправляется код ошибки
И на cliente отображается страница loginExpired + происходит logout
6) Если токен валиден, то по userId(email) ищутся все подходящие проекты
7) можно добавить индексацию по userId

- реализовать метод get sessionToken
- может быть отдельный контроллер для sessions

- пользователь crud
удаление user, 
user должен повторно ввести пароль
удаляются все связанные projects

- проект crud:
создать
Удалить, удаляются все связанные todos
изменить название
также можно получить все проекты конкретного пользователя



- Коллекция projects будет максимально легкой
и будет содержать только:
!отсортировать проекты по дате создания в обратном порядке ?
project_id,
user_id,
project_name,

-Коллекция todos будет содержать
project_id

проекты связаны с пользователем через user_id(email)
todos связаны с projects через project_id

-ошибка при сравнение tokena из sessions
 при регистрации user не записывается в sessions

//getUser добавить catch

project, users:
 - перенести верификацию пользователя в отдельный метод

// ошибки:
 +при истечении срока действия токена отправляется код 401 Unauthorized (изменил метод логаут)
 -при невалидном токене пользователь не может сделать logout

-механизм refresh token

- убрать сессии? т.к. нужно чтобы пользователь мог пользоваться приложением сразу с 2х устройства
- или оставить сессии только для хранения jwt?
- нужно ли вообще хранить jwt ? судя по всему - нет. Достаточно ограниченного времени действия токена

или так:
когда пользователь логинится из sessions достается токен, проверяется его валидность
если токен валиден, то пользователю возвращается токен, если нет то создается новый токен,
записывается в sessions и возвращается пользователю
минус в том, что пользователь может получить валидный токен, но с почти истекшим сроком действия
и сессия через пару минут окажется просроченной, поэтому этот вариант не подходит
лучше использовать вариант без сессий

-если получать project и todos с помощью aggregate,
то не совсем понятно, как сделать пагинацию для todos.

возможно придется сделать 
componentDidMount отдельно для Project и Todos list

- при добавлении task, проверка, что проект, которому принадлежит task,
принадлежит пользователю отправившему запрос

- при выполнении действий над tasks,
проверять что tasks находятся в project, который принадлежит пользователю

- добавить id в токен

user:
индексы:
_id - default
email - для быстрого поиска пользователя по email при регистрации
получение данных пользователя и всех проектов не включены в один pipeline,
т.к. пользователь отдельно записывается в sessionStorage,
а запрос проектов должен происходить независимо при обновлении стрницы projects

projects:
индексы:
_id - default
userId - при получении get запроса от 
